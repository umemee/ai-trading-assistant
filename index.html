<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>AI 트레이딩 어시스턴트 V6.0</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 아이콘 및 폰트 스타일링 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-900 text-gray-100">

  <!-- 로그인 모달 -->
  <div id="pw-modal" class="modal-overlay">
    <div class="modal-box">
      <h2 class="modal-title">개인 로그인</h2>
      <input id="pw-input" type="password" class="modal-input" placeholder="비밀번호를 입력하세요" autocomplete="off" />
      <button id="pw-btn" class="modal-btn">로그인</button>
      <div id="login-status" class="modal-status"></div>
    </div>
  </div>

  <!-- 상단 네비게이션 -->
  <nav class="navbar">
    <div class="navbar-container">
      <h1 class="navbar-title">AI 트레이딩 어시스턴트 V6.0</h1>
      <div class="navbar-menu">
        <button class="nav-item active" data-section="dashboard">
          <i class="fas fa-chart-pie"></i> 대시보드
        </button>
        <button class="nav-item" data-section="scanner">
          <i class="fas fa-satellite-dish"></i> SignalScanner
        </button>
        <button class="nav-item" data-section="approval">
          <i class="fas fa-check-double"></i> 승인 워크플로우
        </button>
        <button class="nav-item" data-section="meta">
          <i class="fas fa-chart-line"></i> MetaLearner
        </button>
        <button class="nav-item" data-section="logic">
          <i class="fas fa-brain"></i> LogicDiscoverer
        </button>
        <button class="nav-item" data-section="settings">
          <i class="fas fa-cog"></i> 설정
        </button>
        <button id="logout-btn" class="nav-item nav-logout" style="display:none;">
          <i class="fas fa-sign-out-alt"></i> 로그아웃
        </button>
      </div>
      <div id="user-status" class="navbar-status"></div>
    </div>
  </nav>

  <!-- 메인 콘텐츠 섹션 -->
  <div id="main" class="section" style="display:none;">
    <div class="container">

      <!-- 대시보드 -->
      <section id="dashboard" class="content-section active">
        <h2 class="section-title">📊 대시보드</h2>
        <div class="dashboard-cards">
          <div class="dashboard-card">
            <div>시스템 상태: <span id="connection-status" class="status-indicator">-</span></div>
            <div>초기화: <span id="system-initialized">-</span></div>
            <div>스캐너: <span id="system-scanning">-</span></div>
            <div>감시 종목: <span id="ticker-count">0</span></div>
            <div>아톰 수: <span id="atoms-count">0</span></div>
            <div>분자 수: <span id="molecules-count">0</span></div>
            <div>업타임: <span id="system-uptime">-</span></div>
          </div>
          <div class="dashboard-card">
            <div class="mb-2">서비스 연결상태</div>
            <div>Sheets: <span id="sheets-status" class="status-indicator">-</span></div>
            <div>Gemini: <span id="gemini-status" class="status-indicator">-</span></div>
            <div>Alpaca: <span id="alpaca-status" class="status-indicator">-</span></div>
          </div>
        </div>
        <div class="dashboard-log">
          <h3>최근 신호</h3>
          <div id="signals-display"></div>
        </div>
        <div class="dashboard-log">
          <h3>시스템 로그</h3>
          <div id="log-display"></div>
          <div class="log-actions">
            <button onclick="exportLogs()" class="btn">로그 내보내기</button>
            <button onclick="clearLogs()" class="btn">로그 삭제</button>
          </div>
        </div>
      </section>

      <!-- SignalScanner -->
      <section id="scanner" class="content-section" style="display:none;">
        <h2 class="section-title">📡 실시간 시그널 감시</h2>
        <div class="scanner-controls">
          <input id="ticker-input" type="text" class="input" placeholder="티커 입력" autocomplete="off" />
          <button id="add-ticker-btn" class="btn">추가</button>
          <div id="watchlist" class="watchlist"></div>
          <button id="start-scanner-btn" class="btn btn-start">스캐너 시작</button>
          <button id="stop-scanner-btn" class="btn btn-stop">스캐너 정지</button>
        </div>
      </section>

      <!-- 승인 워크플로우 -->
      <section id="approval" class="content-section" style="display:none;">
        <h2 class="section-title">🔍 검역 전략 검토</h2>
        <div>
          <table id="approval-table" class="table">
            <!-- 동적으로 생성됨 -->
          </table>
        </div>
      </section>

      <!-- MetaLearner -->
      <section id="meta" class="content-section" style="display:none;">
        <h2 class="section-title">🧠 MetaLearner (복기/피드백)</h2>
        <div>
          <table id="meta-table" class="table">
            <!-- 동적으로 생성됨 -->
          </table>
        </div>
      </section>

      <!-- LogicDiscoverer -->
      <section id="logic" class="content-section" style="display:none;">
        <h2 class="section-title">🧬 LogicDiscoverer (AI 전략 제안)</h2>
        <form id="logic-form" onsubmit="return false;">
          <input id="analysis-ticker" type="text" class="input" placeholder="티커 입력" autocomplete="off" />
          <input id="analysis-date" type="date" class="input" />
          <input id="analysis-context" type="text" class="input" placeholder="사용자 통찰 입력" autocomplete="off" />
          <button id="analyze-btn" class="btn">분석 요청</button>
        </form>
        <div id="analysis-result"></div>
      </section>

      <!-- 설정 -->
      <section id="settings" class="content-section" style="display:none;">
        <h2 class="section-title">⚙️ API/서비스 설정</h2>
        <div class="settings-box">
          <label for="alpaca-key">Alpaca API Key</label>
          <input id="alpaca-key" type="text" class="input" autocomplete="off" />
          <label for="alpaca-secret">Alpaca API Secret</label>
          <input id="alpaca-secret" type="text" class="input" autocomplete="off" />
          <label for="gemini-key">Gemini API Key</label>
          <input id="gemini-key" type="text" class="input" autocomplete="off" />
          <label for="sheets-id">Google Sheets ID</label>
          <input id="sheets-id" type="text" class="input" autocomplete="off" />
          <label for="google-service-account">Google Service Account JSON</label>
          <textarea id="google-service-account" class="input" rows="3"></textarea>
          <div class="settings-actions">
            <button id="save-api-btn" class="btn">설정 저장</button>
            <button id="test-connection-btn" class="btn">연결 테스트</button>
            <button id="init-system-btn" class="btn">시스템 초기화</button>
            <button id="connect-ws-btn" class="btn">WebSocket 재연결</button>
          </div>
        </div>
      </section>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
